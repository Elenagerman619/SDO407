<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
 
    <script src="https://kit.fontawesome.com/c8a7711137.js" crossorigin="anonymous"></script>
 
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
 
    <title>Форма регистрации</title>
 <style>
     .fas {
        color: rgb(99, 169, 235);
     }
 
     span > i {
         cursor: pointer;
     }
 
     span > i:hover {
         color: gray;
     }
 </style>
 
  </head>
  <body>
 
    <a href ="http://a0528167.xsph.ru/mainpage.html">На главную</a>
 
   <form onsubmit="sendForm(this); return false;"> 
       <div class="container">
           <h1 class="my-5 text-center">Регистрация на сайте</h1>
           <div class="col-md-5 mx-auto">
    <div class="input-group my-2">
        <div class="input-group-prepend">
        <div class="input-group-text"><i class="fas fa-user-ninja fa-lg"></i></div>
        </div>
        <input 
        type="text" 
        class="form-control" 
        placeholder="Имя" Required name="name"> 
        </div>
 
        <div class="input-group my-2">
            <div class="input-group-prepend">
            <div class="input-group-text"><i class="fas fa-user-ninja fa-lg"></i></div>
            </div>
            <input 
            type="text" 
            class="form-control" 
            placeholder="Фамилия" Required name="lastname">
 
    </div>
 
    <div class="input-group my-2">
        <div class="input-group-prepend">
        <div class="input-group-text"><i class="fas fa-envelope fa-lg"></i></div>
        </div>
        <input 
        type="email" 
        class="form-control"  
        placeholder="E-mail" Required name="email">
</div>
<p id="info"></p>
 
<div class="input-group my-2">
    <div class="input-group-prepend">
    <div class="input-group-text"><i class="fas fa-lock fa-lg"></i></div>
    </div>
    <input 
    type="password" 
    class="form-control" 
    placeholder="Пароль" 
    Required id="formPass" name="pass">
 
<span onmousedown="formPass.type='text'; this.nextElementSibling.hidden = false; this.hidden = true; ">
    &nbsp;<i class="fas fa-eye fa-lg"></i></span>
 
<span hidden onmouseup="formPass.type='password'; this.previousElementSibling.hidden = false; this.hidden = true;">&nbsp;<i class="fas fa-eye-slash fa-lg"></i></span>
</div>
 
<div class="form-check mb-2">
    <input class="form-check-input" type="checkbox" id="autoSizingCheck" Required="">
    <label class="form-check-label" for="autoSizingCheck">
    Даю своё согласие на обработку персональных данных
    </label>
    </div>
 
    <input type="submit" class="form-control btn btn-danger" 
    value="Зарегистрироваться"/>
</div>
 
    </div>
</div>
    </form>
 
    <script>
 
        async function sendForm(form) {
            let response = await fetch("php/reg_obr.php", {
                method: 'POST', body: new FormData(form)
            });
            let result = await response.text();
           if(result=="ok") {
               alert("Успешно зарегистрирован!");
           } else {
            info.innerText = "Такой пользователь уже существует";
           }
        }
 
    </script>
 
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
 
    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"crossorigin="anonymous"></script>
    -->
  </body>
</html>
